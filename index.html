<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Ingenieria en ML</title>

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/blood.css">
    <link rel="stylesheet" href="css/custom.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <h1>Ingeniería</h1>
          <h3>Ingeniería en proyectos de <span class="ds">Data Science</span> &amp;
              <span class="ml">Machine Learning<span></h3>
          <br/>
          <p>
              Muestrario de lo que nos funcionó
          </p>
          <br/>
          <p>
            <small>Created by <a href="https://github.com/jmansilla/">Javier Mansilla </a> @ <a href="https://github.com/machinalis/">Machinalis</a></small>
          </p>
        </section>

        <section>
          <h2>En qué pensamos re Ingeniería</h2>

            <ul class="fragment main-adjetives">
              <li>Simplicidad</li>
              <li>Mantenibilidad</li>
              <li>Extensibilidad</li>
            </ul>

            <ul class="fragment">
                <li>Patrones de diseño</li>
                <li>Testing</li>
                <li>Documentación</li>
                <li>Modularización</li>
                <li>Convenciones</li>
                <li>Versionado</li>
            </ul>
            <p class="fragment">
                Claridad sobre quiénes son los stakeholders
            </p>

          <aside class="notes">
            Primer listado: grandes necesidades
            Segundo listado: recursos que conducen hacia las necesidades
            Destinatarios:
                - Cliente y su multiplicidad
                - Developers / Ingenieros
                - Managers
                - Researchers
            * Nota: ¡Equipos de trabajo! Si trabajás solo, algunas partes pueden ser distintas
          </aside>

        </section>

        <section>
            <section>
              <h2>¿Cuánto aplica a un desarrollo ML?</h2>
              <h1 class="fragment">TODO</h1>
              <p class="fragment">aunque algunas veces</p>
              <h1 class="fragment">NADA</h1>
              <aside class="notes"></aside>
            </section>
            <section>
              <h1>TODO <small>porque...</small></h1>
              <p class="fragment">El resultado final es una <strong>pieza de software</strong></p>
              <p class="fragment">instalado en algún server</p>
              <p class="fragment">resolviendo problemas a algún usuario</p>
              <p class="fragment">donde quien lo mantenga puede no tener formación en ML</p>
              <aside class="notes" data-markdown>
                  <script type="text/template">
                  Cobra importancia que se haya contemplado lo usual:

                   - doc (diseño, uso, mantenimiento)
                   - logging
                   - testing
                   - etc
                    </script>
              </aside>
            </section>
            <section>
              <h1>NADA <small>cuando...</small></h1>
              <aside class="notes" data-markdown>
                  - Notebooks
                  - buscando insights
                  - primera aproximación para entender un problema
                  - Si vas a compartir:
                    - documentá
                    - limpiá
                    - nunca es excusa para variables
                  - Si
              </aside>
              <p class="fragment">El resultado final <strong>NO</strong> es software</p>
              <p class="fragment">Explorando datos</p>
              <p class="fragment">Generando un baseline</p>
              <p class="fragment">Explorando hipótesis</p>
              <p class="fragment">Generando datos: corpora, gráficos, validaciones</p>
              <p class="fragment">Experimentos</p>
                </section>
            <section>
              <h1 class="quotation">NADA</h1>
              <aside class="notes" data-markdown>
                  - Notebooks
                  - buscando insights
                  - primera aproximación para entender un problema
              </aside>
              <p class="fragment">Nunca hay excusas para...</p>
              <section class="fragment"><pre>
                  <code data-trim data-noescape>
def el_que_invoca():
    return "fu###er"

def pep8IsDead(QueVivaElCamelCase=3):
    ...

def check_stuff(a, b, c, d):
    a = [w for w in a if len(w) > 3]
    a += [w for w in b if w not in c]
    a = len(a)
    return a >= 8
                  </code></pre>
              </section>
            <p class="fragment">
                Las buenas prácticas <strong>son herramientas</strong>
            </p>
            <aside class="notes" data-markdown>
                - Si vas a compartir:
                  - documentá
                  - limpiá
                - Testing para afianzar
                - Pair review => improve calidad para permitirlo
            </aside>
            </section>
        </section>

        <section>
            <section>
              <h2>Ingeniería <small>haciendo DS / ML</small></h2>
              <p>Entendiendo la problemática</p>
              <p class="fragment" data-markdown>
                  En **EQUIPOS** de desarrollo dando **soluciones reales** a **usuarios reales**
              </p>
          </section>
          <section>
            <h2>Diferencias <small>con otros proyectos</small></h2>
            <h5>que cambian radicalmente el desarrollo</h5>
            <aside class="notes" data-markdown>
                * A) de parsear los datos, de formatear un corpus, de definir mis features, de medir resultados, de herramientas a escoger
                * B)
                  - frameworks con madurez faltante
                  - código repetitivo
                  - mucho ad-hoc para mi problema
                * C)
            </aside>
            <p class="fragment">Muchas maneras de hacer lo mismo</p>
            <p class="fragment">Código no reusable</p>
            <p class="fragment">Muchos pasos manuales</p>
            <p class="fragment">Muchas herramientas</p>
            <p class="fragment">Mucho tiempo de espera</p>
          </section>

          <section>
            <h2>Design Tips</h2>
            <h5>Muestrario de lo que nos funcionó</h5>
            <aside class="notes" data-markdown>
                The fastest solution often leads to a local optimum but does not reuse
                anything existing nor can be reused in the future.
            </aside>
            <p class="fragment">Empezar from scratch vs mejorar el primer POC</p>
            <p class="fragment">Blackboxing: interfaz clara que me permita evolucionar</p>
            <p class="fragment">Tradeoff constante: Mantenimiento vs Deployment vs Performance vs Mis Métricas</p>
            <p class="fragment">Convivencia entre Producción &amp; Experimentación</p>
          </section>

          <section>
            <h2>Development Tips</h2>
            <h5>Muestrario de lo que nos funcionó (2)</h5>
            <aside class="notes" data-markdown>
            </aside>
            <p class="fragment">Cuando el prototipo (chanchada) funciona, integrarlo limpio</p>
            <p class="fragment">Pair Review: de desarrollo, de experimentación, de diseños</p>
            <p class="fragment">Buscar soluciones pre-existentes</p>
            <p class="fragment">Definir abstracciones claras. Documentarlas</p>
            <p class="fragment">Unificar criterios y formas</p>
            <p class="fragment">Arrancar siempre por lo simple: modelos, esquemas, etc</p>
            <p class="fragment">Documentar, documentar, documentar</p>
            <p class="fragment">Involucrar temprano al devop</p>
            <p class="fragment">NO mantener código muerto</p>
          </section>

      </section>


      <section>
        <section>
            <h2>Esqueleto de proyecto</h2>
            <pre><code>repo/
    my_project_name/
        data.py
        models.py
        features.py
    experimentation/
        metrics.py
        experiment.py
    bin/
    blobs/
    docs/
    setup/
    stuff/
    tests/
    ui/
</code></pre>
        </section>

        <section>
          <h2><small>setup</small></h2>
          <ul>
              <li>Installation &amp; setup notes</li>
              <li>Requirements</li>
              <li>Fabric/Ansible/Vagrant/...</li>
          </ul>
          <pre><code>setup/
  install.txt
  requirements.txt
  ${continuous integration}
  ${deploy automation}
</code></pre>
        </section>

        <section>
          <h2><small>my_project_name/data.py</small></h2>
          <p data-markdown>
              - Abstracción **COMPLETA** de las fuentes de datos
              - Vistas / filtros
          </p>
          <pre><code>### File: data.py
import os

def list_data_points():
    db_1 = connect_to_db_1(os.getenv('DB_1_CONNECTION_STRING'))
    db_2 = connect_to_db_2(os.getenv('DB_2_CONNECTION_STRING'))
    for item in db_1.some_table.filter(something):
        d = {
            'item_id': item.id,
            'field_a': item.joined_table.a,
            # ...
            'field_n': len(item.related_subitems.all())
        }
        extra_info = db_2.collection.find(field_x=item.id)
        d['field_z'] = extra_info.field_z
        yield d
</code></pre>
        <ul class="fragment"><li>Normalizaciones / correcciones / limpiezas</li></ul>
        </section>

        <section>
          <h2><small>my_project_name/models.py</small></h2>
          <p data-markdown>
              - Definición de uno o más modelos
              - Por lo general, configuración declarativa
              - Si involucra lógica delicada, merece *atención*
          </p>
        </section>

        <section>
          <h2><small>my_project_name/features.py</small></h2>
          <p data-markdown>
              - feature engineering
              - Si involucra lógica delicada, merece *atención*
          </p>
        </section>

        <section>
          <h2><small>experimentation</small></h2>
          <p data-markdown>
              - definición e implementación de métricas
              - particiones
              - ejecutable que permita evaluar variantes sin cambiar todo el código
                - requiere modelos *configurables*
                - requiere mesura y prudencia: YAGNI
              - registro de resultados
          </p>
        </section>

        <section>
          <h2><small>bin</small></h2>
          <p>bolsa de utilities que sean de conveniencia y uso recurrente</p>
        </section>

        <section>
          <h2><small>blobs</small></h2>
          <p>placeholder para archivos grandes de datos, crudos o generados</p>
          <p data-markdown>
              - .gitignore para no incluirlos en el repo
              - index.txt para describir cómo / donde obtenerlos
              - dumps, pickles, imágenes, etc
              - puede ser un dropbox / GFolder / Otros
          </p>

        </section>

        <section>
          <h2>Ejercicio</h2>
          <p>To be defined...</p>
        </section>

    </section>

      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
      // More info https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        history: true,

        // More info https://github.com/hakimel/reveal.js#dependencies
        dependencies: [
          { src: 'plugin/markdown/marked.js' },
          { src: 'plugin/markdown/markdown.js' },
          { src: 'plugin/notes/notes.js', async: true },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
        ]
      });
    </script>
  </body>
</html>
